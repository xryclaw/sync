# SLS 日志分析平台 - 后续功能开发路线图

**文档创建时间：** 2026-02-14  
**当前状态：** MVP 已完成，准备进入迭代开发阶段

---

## 📊 当前进度

### ✅ 已完成（MVP v1.0）
- [x] CSV 文件上传
- [x] 日志表格展示
- [x] 时间范围筛选
- [x] 日志级别筛选（Info/Error）
- [x] 查看原始日志详情
- [x] 一键启动/停止脚本

### 📝 规划中
- [ ] 日志标注与规则管理（Task 11）
- [ ] 可视化时间线
- [ ] 智能分析与推荐
- [ ] 多用户支持
- [ ] 性能优化

---

## 🎯 迭代计划

### Phase 1: 日志标注与规则管理（优先级：高）

**目标：** 实现持续学习能力，让系统能够识别和分类日志事件

**功能清单：**
1. 事件标签管理
   - 创建/编辑/删除标签
   - 标签颜色自定义
   - 标签分类管理

2. 规则引擎
   - 正则表达式匹配
   - 关键字匹配
   - 精确匹配
   - 规则优先级设置
   - 规则启用/禁用

3. 未识别事件统计
   - 自动发现新事件模式
   - 按出现频率排序
   - 批量标注支持

4. 日志自动标注
   - 上传时自动应用规则
   - 历史日志批量重新标注
   - 标注结果展示

**技术实现：**
- 后端：新增 4 张数据库表（event_labels, event_rules, log_labels, unknown_events）
- 前端：新增标签管理页面、规则配置页面
- API：标签 CRUD、规则 CRUD、批量标注接口

**预计工期：** 3-5 天

**详细设计文档：** `docs/plans/2026-02-13-task11-log-labeling.md`

---

### Phase 2: 可视化时间线（优先级：中）

**目标：** 提供直观的时间线视图，快速定位问题发生时间点

**功能清单：**
1. 时间线图表
   - 横轴：时间
   - 纵轴：事件类型/日志级别
   - 支持缩放和拖拽

2. 事件标记
   - Error 事件高亮显示
   - 标注事件用不同颜色区分
   - 点击事件跳转到详情

3. 时间段分析
   - 选择时间段查看统计
   - 事件密度热力图
   - 异常时间段自动识别

**技术选型：**
- 图表库：ECharts / D3.js / Recharts
- 交互：支持缩放、拖拽、点击跳转

**预计工期：** 2-3 天

---

### Phase 3: 智能分析与推荐（优先级：中）

**目标：** 利用规则引擎和历史数据，提供智能分析建议

**功能清单：**
1. 异常模式检测
   - 识别异常频繁的事件序列
   - 检测 Error 前的常见操作路径
   - 异常时间段标记

2. 相似问题推荐
   - 根据当前日志推荐相似历史案例
   - 显示相似度评分
   - 快速跳转到历史记录

3. 统计报表
   - 事件类型分布饼图
   - 日志级别统计
   - 高频事件 Top 10
   - 时间段活跃度曲线

**技术实现：**
- 算法：序列相似度计算、频繁模式挖掘
- 缓存：统计数据缓存优化性能

**预计工期：** 4-6 天

---

### Phase 4: 多用户与权限管理（优先级：低）

**目标：** 支持团队协作，不同用户管理各自的日志数据

**功能清单：**
1. 用户系统
   - 用户注册/登录
   - 密码加密存储
   - Session/JWT 认证

2. 权限管理
   - 管理员：全局配置、用户管理
   - 普通用户：只能查看自己上传的日志
   - 标签和规则共享机制

3. 数据隔离
   - 按用户隔离日志数据
   - 共享规则库（可选）
   - 团队协作模式

**技术实现：**
- 认证：JWT Token
- 数据库：新增 users 表，logs 表添加 user_id 字段
- 中间件：权限验证中间件

**预计工期：** 3-4 天

---

### Phase 5: 性能优化与部署（优先级：中）

**目标：** 提升系统性能，支持大规模日志数据

**优化方向：**
1. 数据库优化
   - 添加索引（时间、uid、level）
   - 分页查询优化
   - 定期清理旧数据

2. 前端优化
   - 虚拟滚动（大数据量表格）
   - 懒加载
   - 请求防抖/节流

3. 部署方案
   - Docker 容器化
   - Nginx 反向代理
   - PM2 进程管理
   - 自动备份脚本

**预计工期：** 2-3 天

---

## 🔧 技术债务清单

### 需要改进的地方
1. **错误处理**
   - 统一错误处理中间件
   - 前端错误边界组件
   - 详细的错误日志

2. **测试覆盖**
   - 单元测试（后端 API）
   - 集成测试（上传流程）
   - E2E 测试（关键路径）

3. **代码规范**
   - ESLint 配置
   - Prettier 格式化
   - Git hooks（pre-commit）

4. **文档完善**
   - API 文档（Swagger）
   - 用户使用手册
   - 开发者指南

---

## 📅 开发时间线（建议）

```
Week 1-2:  Phase 1 - 日志标注与规则管理
Week 3:    Phase 2 - 可视化时间线
Week 4-5:  Phase 3 - 智能分析与推荐
Week 6:    Phase 5 - 性能优化与部署
Week 7:    Phase 4 - 多用户与权限管理（可选）
Week 8:    技术债务清理、测试、文档
```

**总预计工期：** 6-8 周（根据实际需求调整）

---

## 🎨 UI/UX 改进计划

### 当前 MVP 界面
- 基础表格展示
- 简单筛选功能
- 原始数据弹窗

### 改进方向
1. **导航优化**
   - 侧边栏导航（上传、查看、标注、统计）
   - 面包屑导航
   - 快捷键支持

2. **交互优化**
   - 表格行高亮（鼠标悬停）
   - 快速筛选（点击标签直接筛选）
   - 拖拽排序

3. **视觉优化**
   - 暗色主题支持
   - 自定义主题色
   - 响应式布局（移动端适配）

---

## 🚀 快速开始下一阶段

### 立即开始 Phase 1（日志标注）

**准备工作：**
1. 阅读详细设计文档：`docs/plans/2026-02-13-task11-log-labeling.md`
2. 确认数据库表结构
3. 规划 API 接口

**开发顺序：**
1. 后端数据库表创建
2. 标签管理 API
3. 规则管理 API
4. 前端标签管理页面
5. 前端规则配置页面
6. 自动标注功能集成
7. 测试与优化

**启动命令：**
```powershell
cd C:\Users\mlxia\.openclaw\workspace\projects\sls-log-analyzer
.\start.ps1
```

---

## 📝 备注

- 优先级可根据实际需求调整
- 每个 Phase 完成后进行代码审查和测试
- 保持 MVP 的简洁性，避免过度设计
- 持续收集用户反馈，迭代优化

**下一步行动：** 开始 Phase 1 - 日志标注与规则管理功能开发
